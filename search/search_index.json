{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Introduction","text":"<p>PrimalScheme3 is a tool designed to generate the primers required for a tiling amplicon (ARTIC style) primer schemes.</p> <p>A web version of the tool is available here. </p>"},{"location":"#installation","title":"Installation","text":"<p>PrimalScheme3 is available on PyPi</p> <pre><code>pip install primalscheme3\n</code></pre> <p>Can also be  built from source (using poetry).</p> <pre><code>git clone https://github.com/ChrisgKent/primalscheme3\ncd primalscheme3\n</code></pre> <p>It can also be run as a docker image (TODO). </p> <pre><code>docker pull chriken/primalscheme3:latest\n</code></pre>"},{"location":"#simple-use-cases","title":"Simple use cases","text":""},{"location":"#input-files","title":"Input files","text":"<p>Say you want to create a primer scheme to be able to sequence an organism. The first step is to get representative, high quality genomes of the thing you want to sequence.  </p> <p>Once downloaded these genomes need to be aligned into an Multiple Sequence Alignment (MSA) in fasta format.</p> <p>Next you need to select a primary reference. This is the genome that the primer will in the indexing system of, conventionally, this should be a reference genome, but it is not a requirement. This is done by making it the first genome in the MSA, as shown below.</p> <pre><code>&gt;NC_001498.1\n...\n&gt;PP101943.1\n...\n</code></pre> <p>In this example the primary reference will be <code>NC_001498.1</code>. </p>"},{"location":"#running-primalscheme3","title":"Running PrimalScheme3","text":"<p>PrimalScheme3 has two main modes; creating schemes and panels, please see the relevant pages for a detailed view, but simply; </p> <ul> <li> <p>A scheme is a classical overlapping scheme across the entire genome(s)</p> </li> <li> <p>A panel targets specified regions of the genome(s).</p> </li> </ul> <pre><code>primalscheme3 scheme-create --msa example.fasta --output example_out --amplicon-size 400 --n-pools 2 \n</code></pre> <p>This will create a titling scheme using 400bp amplicons in 2 pool.</p>"},{"location":"#output-files","title":"Output files","text":"<p>The main output files are all written to the <code>--output</code> directory.</p> <ul> <li> <p><code>primer.bed</code>: The main file containing the sequence and location of the primers in the primary reference. </p> </li> <li> <p><code>reference.fasta</code>: The primary reference.</p> </li> </ul> <p>There are also a couple figures to help understand the scheme.</p> <ul> <li> <p><code>plot.html</code>: An interactive plot showing how the primers tile across the genome.</p> </li> <li> <p><code>primer.html</code>: A heatmap showing how well the primers match to the template.</p> </li> </ul>"},{"location":"cli/","title":"CLI","text":"<p>Usage:</p> <pre><code>$ primalscheme3 [OPTIONS] COMMAND [ARGS]...\n</code></pre> <p>Options:</p> <ul> <li><code>--version</code></li> <li><code>--install-completion</code>: Install completion for the current shell.</li> <li><code>--show-completion</code>: Show completion for the current shell, to copy it or customize the installation.</li> <li><code>--help</code>: Show this message and exit.</li> </ul> <p>Commands:</p> <ul> <li><code>interactions</code>: Shows all the primer-primer interactions...</li> <li><code>panel-create</code>: Creates a primer panel</li> <li><code>repair-mode</code>: Repairs a primer scheme via adding more...</li> <li><code>scheme-create</code>: Creates a tiling overlap scheme for each...</li> <li><code>scheme-replace</code>: Replaces a primerpair in a bedfile</li> <li><code>visualise-bedfile</code>: Visualise the bedfile</li> <li><code>visualise-primer-mismatches</code>: Visualise mismatches between primers and...</li> </ul>"},{"location":"cli/#primalscheme3-interactions","title":"<code>primalscheme3 interactions</code>","text":"<p>Shows all the primer-primer interactions within a bedfile</p> <p>Usage:</p> <pre><code>$ primalscheme3 interactions [OPTIONS] BEDFILE\n</code></pre> <p>Arguments:</p> <ul> <li><code>BEDFILE</code>: Path to the bedfile  [required]</li> </ul> <p>Options:</p> <ul> <li><code>--threshold FLOAT</code>: Only show interactions more severe (Lower score) than this value  [default: -26.0]</li> <li><code>--help</code>: Show this message and exit.</li> </ul>"},{"location":"cli/#primalscheme3-panel-create","title":"<code>primalscheme3 panel-create</code>","text":"<p>Creates a primer panel</p> <p>Usage:</p> <pre><code>$ primalscheme3 panel-create [OPTIONS]\n</code></pre> <p>Options:</p> <ul> <li><code>--msa PATH</code>: Paths to the MSA files  [required]</li> <li><code>--output PATH</code>: The output directory  [required]</li> <li><code>--region-bedfile FILE</code>: Path to the bedfile containing the wanted regions</li> <li><code>--input-bedfile FILE</code>: Path to a primer.bedfile containing the pre-calculated primers</li> <li><code>--mode [entropy|region-only|equal]</code>: Select what run mode  [default: region-only]</li> <li><code>--amplicon-size INTEGER</code>: The size of an amplicon  [default: 400]</li> <li><code>--n-pools INTEGER RANGE</code>: Number of pools to use  [default: 2; x&gt;=1]</li> <li><code>--dimer-score FLOAT</code>: Threshold for dimer interaction  [default: -26.0]</li> <li><code>--min-base-freq FLOAT RANGE</code>: Min freq to be included,[0&lt;=x&lt;=1]  [default: 0.0; 0.0&lt;=x&lt;=1.0]</li> <li><code>--mapping [first|consensus]</code>: How should the primers in the bedfile be mapped  [default: first]</li> <li><code>--max-amplicons INTEGER RANGE</code>: Max number of amplicons to create  [x&gt;=1]</li> <li><code>--max-amplicons-msa INTEGER RANGE</code>: Max number of amplicons for each MSA  [x&gt;=1]</li> <li><code>--max-amplicons-region-group INTEGER RANGE</code>: Max number of amplicons for each region  [x&gt;=1]</li> <li><code>--force / --no-force</code>: Override the output directory  [default: no-force]</li> <li><code>--high-gc / --no-high-gc</code>: Use high GC primers  [default: no-high-gc]</li> <li><code>--offline-plots / --no-offline-plots</code>: Includes 3Mb of dependencies into the plots, so they can be viewed offline  [default: offline-plots]</li> <li><code>--use-matchdb / --no-use-matchdb</code>: Create and use a mispriming database  [default: use-matchdb]</li> <li><code>--help</code>: Show this message and exit.</li> </ul>"},{"location":"cli/#primalscheme3-repair-mode","title":"<code>primalscheme3 repair-mode</code>","text":"<p>Repairs a primer scheme via adding more primers to account for new mutations</p> <p>Usage:</p> <pre><code>$ primalscheme3 repair-mode [OPTIONS]\n</code></pre> <p>Options:</p> <ul> <li><code>--bedfile PATH</code>: Path to the bedfile  [required]</li> <li><code>--msa PATH</code>: An MSA, with the reference.fasta, aligned to any new genomes with mutations  [required]</li> <li><code>--config PATH</code>: Path to the config.json  [required]</li> <li><code>--output PATH</code>: The output directory  [required]</li> <li><code>--force / --no-force</code>: Override the output directory  [default: no-force]</li> <li><code>--help</code>: Show this message and exit.</li> </ul>"},{"location":"cli/#primalscheme3-scheme-create","title":"<code>primalscheme3 scheme-create</code>","text":"<p>Creates a tiling overlap scheme for each MSA file</p> <p>Usage:</p> <pre><code>$ primalscheme3 scheme-create [OPTIONS]\n</code></pre> <p>Options:</p> <ul> <li><code>--msa PATH</code>: The MSA to design against. To use multiple MSAs, use multiple --msa flags. (--msa 1.fasta --msa 2.fasta)  [required]</li> <li><code>--output PATH</code>: The output directory  [required]</li> <li><code>--amplicon-size INTEGER</code>: The size of an amplicon. Min / max size are \u00b1 10 percent [100&lt;=x&lt;=2000]  [default: 400]</li> <li><code>--bedfile PATH</code>: An existing bedfile to add primers to</li> <li><code>--min-overlap INTEGER RANGE</code>: min amount of overlap between primers  [default: 10; x&gt;=0]</li> <li><code>--n-pools INTEGER RANGE</code>: Number of pools to use  [default: 2; x&gt;=1]</li> <li><code>--dimer-score FLOAT</code>: Threshold for dimer interaction  [default: -26.0]</li> <li><code>--min-base-freq FLOAT RANGE</code>: Min freq to be included,[0&lt;=x&lt;=1]  [default: 0.0; 0.0&lt;=x&lt;=1.0]</li> <li><code>--mapping [first|consensus]</code>: How should the primers in the bedfile be mapped  [default: first]</li> <li><code>--circular / --no-circular</code>: Should a circular amplicon be added  [default: no-circular]</li> <li><code>--backtrack / --no-backtrack</code>: Should the algorithm backtrack  [default: no-backtrack]</li> <li><code>--ignore-n / --no-ignore-n</code>: Should N in the input genomes be ignored  [default: no-ignore-n]</li> <li><code>--force / --no-force</code>: Override the output directory  [default: no-force]</li> <li><code>--input-bedfile PATH</code>: Path to a primer.bedfile containing the pre-calculated primers</li> <li><code>--high-gc / --no-high-gc</code>: Use high GC primers  [default: no-high-gc]</li> <li><code>--offline-plots / --no-offline-plots</code>: Includes 3Mb of dependencies into the plots, so they can be viewed offline  [default: offline-plots]</li> <li><code>--use-matchdb / --no-use-matchdb</code>: Create and use a mispriming database  [default: use-matchdb]</li> <li><code>--help</code>: Show this message and exit.</li> </ul>"},{"location":"cli/#primalscheme3-scheme-replace","title":"<code>primalscheme3 scheme-replace</code>","text":"<p>Replaces a primerpair in a bedfile</p> <p>Usage:</p> <pre><code>$ primalscheme3 scheme-replace [OPTIONS] PRIMERNAME PRIMERBED MSA\n</code></pre> <p>Arguments:</p> <ul> <li><code>PRIMERNAME</code>: The name of the primer to replace  [required]</li> <li><code>PRIMERBED</code>: The bedfile containing the primer to replace  [required]</li> <li><code>MSA</code>: The msa used to create the original primer scheme  [required]</li> </ul> <p>Options:</p> <ul> <li><code>--amplicon-size INTEGER</code>: The size of an amplicon. Use single value for \u00b1 10 percent [100&lt;=x&lt;=2000]  [required]</li> <li><code>--config PATH</code>: The config.json used to create the original primer scheme  [required]</li> <li><code>--help</code>: Show this message and exit.</li> </ul>"},{"location":"cli/#primalscheme3-visualise-bedfile","title":"<code>primalscheme3 visualise-bedfile</code>","text":"<p>Visualise the bedfile</p> <p>Usage:</p> <pre><code>$ primalscheme3 visualise-bedfile [OPTIONS] BEDFILE REF_PATH\n</code></pre> <p>Arguments:</p> <ul> <li><code>BEDFILE</code>: The bedfile containing the primers  [required]</li> <li><code>REF_PATH</code>: The bedfile containing the primers  [required]</li> </ul> <p>Options:</p> <ul> <li><code>--ref-id TEXT</code>: The reference genome ID  [required]</li> <li><code>--output FILE</code>: Output location of the plot  [default: bedfile.html]</li> <li><code>--help</code>: Show this message and exit.</li> </ul>"},{"location":"cli/#primalscheme3-visualise-primer-mismatches","title":"<code>primalscheme3 visualise-primer-mismatches</code>","text":"<p>Visualise mismatches between primers and the input genomes</p> <p>Usage:</p> <pre><code>$ primalscheme3 visualise-primer-mismatches [OPTIONS] MSA BEDFILE\n</code></pre> <p>Arguments:</p> <ul> <li><code>MSA</code>: The MSA used to design the scheme  [required]</li> <li><code>BEDFILE</code>: The bedfile containing the primers  [required]</li> </ul> <p>Options:</p> <ul> <li><code>--output FILE</code>: Output location of the plot  [default: primer.html]</li> <li><code>--include-seqs / --no-include-seqs</code>: Reduces plot filesize, by excluding primer sequences  [default: include-seqs]</li> <li><code>--offline-plots / --no-offline-plots</code>: Includes 3Mb of dependencies into the plots, so they can be viewed offline  [default: offline-plots]</li> <li><code>--help</code>: Show this message and exit.</li> </ul>"},{"location":"panels/","title":"Panels","text":"<p>Panels mode was created to enable the targeting of specific regions of the target genome. </p>"},{"location":"panels/#modes","title":"Modes","text":"<p>There are two main run modes for panels creation.</p> <ul> <li> <p><code>entropy</code>: Selects regions with the highest entropy</p> </li> <li> <p><code>region-only</code>: Selects regions specified in a <code>.bed</code> file. See region-only</p> </li> </ul>"},{"location":"panels/#entropy","title":"entropy","text":"<p>This mode calculates the shannon entropy of each position. As uses it to determine the most informative region to cover. This approach was designed as a general solution. If specific regions are requires region-only is better.</p>"},{"location":"panels/#region-only","title":"region-only","text":"<p>This mode requires a .bed file to define the regions (provided by --region-bedfile)</p> <p>The region.bed file is a typical .bed file. Specifying the chromosome the region belongs to and its location. </p> <ul> <li><code>score</code>: is used to determine the priority of the region when picking amplicons. Ie, a larger score means the region will be added first. </li> <li><code>group</code>: is used to show the regions group. For example, if you have typing scheme for 10 lineages, with each lineages containing 10 snps.  Assigning each SNP to its lineages group allows operations like \"Use 2 snps for each group\".  <p>Lines with either only 5cols or empty (<code>''</code>) group col will be treated as normal.</p> </li> </ul> Col Meaning Type Brief description Restrictions 1 chrom String Chromosome name <code>[A-Za-z0-9_]</code> 2 regionStart Int Region start position <code>u64</code> 3 regionEnd Int Region end position <code>u64</code> 4 regionName String Region name <code>[A-Za-z0-9_]</code> 5 score Int Region score <code>f64</code> 6 group String Region group <code>[A-Za-z0-9_]</code> <p>The chrom field must match a primary reference in the input msa</p>"},{"location":"schemes/","title":"Schemes","text":"<p>Schemes produce a tiling amplicons across the length of the genome. </p> <pre><code>    &gt; Example output of scheme-create. \n    &gt; Top panel shows the location of the amplicons, relative to the MSA (not the primary reference). \n    &gt; The second panel shows the base occupancy (Shows the proportion of bases at each positons that are not gaps) in red, with GC content shown by the blue line. \n    &gt; The third panel shows the Entropy at each position in the MSA\n    &gt; Fourth panel shows the location of all thermopassing primers\n</code></pre>"}]}